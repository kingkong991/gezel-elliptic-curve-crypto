\documentclass[svgnames]{beamer}
%\documentclass[svgnames, handout,t]{beamer}

\usefonttheme[onlymath]{serif}		% Display math in serif font

%\usepackage[svgnames]{xcolor}

\batchmode
% \usepackage{pgfpages}
% \pgfpagesuselayout{4 on 1}[letterpaper,landscape,border shrink=5mm]

\usepackage{amsmath,amssymb,color}

\usepackage{algorithmic}
\usepackage{algorithm}

\usepackage{multirow}	% Multiple rows and columns in tables
\usepackage{booktabs}	% Professional tables

% Math stuff
\newcommand{\xor}{\oplus}

\usetheme{Berlin}
\usecolortheme{bear}

\title{Compact implementations of pairings}
\author[Anthony Van Herrewege]{Anthony Van Herrewege\\[2em]
\small Lejla Batina \& Miroslav Knezevic\\
Prof. Dr. Ir. I. 	Verbauwhede \& Prof. Dr. Ir. B. Preneel}
\date{22 May 2009}
%\pgfdeclareimage[height=1cm]{brown-logo}{brown-logo.pdf}
%\logo{\pgfuseimage{brown-logo}\hspace*{0.3cm}}

\newenvironment{changemargin}[2]{%
\begin{list}{}{%
\setlength{\topsep}{0pt}%
\setlength{\leftmargin}{#1}%
\setlength{\rightmargin}{#2}%
\setlength{\listparindent}{\parindent}%
\setlength{\itemindent}{\parindent}%
\setlength{\parsep}{\parskip}%
}%
\item[]}{\end{list}}

\AtBeginSection[]
{
  \begin{frame}<beamer>
    \frametitle{Outline}
    \tableofcontents[currentsection]
  \end{frame}
}
\beamerdefaultoverlayspecification{<+->}

\begin{document}

\frame{\titlepage}

\section[Outline]{}
\begin{frame}{Outline}
  \tableofcontents
\end{frame}

\section{Problem}
\subsection*{Problem}
\begin{frame}{Symmetric cryptography}
	\begin{itemize}
		\item Pro:
			\begin{itemize}
				\item High security per bit
				\item Very fast implementations
			\end{itemize}
		\item Contra:
			\begin{itemize}
				\item How to establish the key?
			\end{itemize}		
	\end{itemize}
\end{frame}

\begin{frame}{Asymmetric cryptography}
	\begin{itemize}
		\item Pro:
			\begin{itemize}
				\item No key establishment necessary
				\item Central location with everyone's key
			\end{itemize}
		\item Contra:
			\begin{itemize}
				\item Need for certificate authorities, \ldots
			\end{itemize}		
	\end{itemize}
\end{frame}

\begin{frame}{Identity-based cryptography}
	\begin{itemize}
		\item Pro:
			\begin{itemize}
				\item Public key deduced from ID
				\item No need for certificates
			\end{itemize}
		\item Extra's:
			\begin{itemize}
				\item Non-interactive key establishment
				\item Date-stamped encryption
			\end{itemize}
		\item Contra:
			\begin{itemize}
				\item How to issue new keys, \ldots ?
			\end{itemize}
	\end{itemize}
\end{frame}

\section{Pairings}
\subsection*{Pairings}
\begin{frame}{What?}
	\begin{itemize}
		\item Mathematical construction discovered in the 40's
		\item Allow implementation of ID-based cryptography
		\item Strength based on discrete logarithm problem
	\end{itemize}
\end{frame}

\begin{frame}{How?}
	Several available pairings:
	\begin{center}Weil, \alert{Tate}, $\eta _T$, Ate, $\ldots$\end{center}
	
	Tate pairing:	
	\[\begin{gathered}
		\hat{e}(P, Q) : E(\mathbb{F}_q)[l] \times E(\mathbb{F}_q)[l] \mapsto \mu _l \\
		\mu _l \in 	\mathbb{F}_{q^k}^*
	\end{gathered}\]
	
%	Mapping needs to be:	
%	\begin{itemize}
%		\item Bilinear: $\hat{e}(P_1 + P_2, Q) = \hat{e}(P_1, Q) \cdot \hat{e}(P_2, Q)$
%		\item Non-degenerate: $\hat{e}(P, P) \neq 1$
%		\item Well defined
%	\end{itemize}
\end{frame}

%\begin{frame}{How?}
%	Calculate using optimized version of Miller's algorithm:\\[1em]
%		\scriptsize{
%		\begin{algorithmic}
%			\REQUIRE $l \in \mathbb{Z}$; $t = \left\lfloor \log _2 (l) \right\rfloor$; $P, Q \in E(\mathbb{F}_{2^m})[l]$
%			\ENSURE $F = \hat{e}(P, Q) \in \mu _l$
%			\STATE $F \gets 1$
%			\STATE $V \gets P$
%			\FOR{$i = t - 1$ to $0$}
%				\STATE $F \gets F^2 \cdot G_{V,V}(\phi(Q))$
%				\STATE $V \gets 2 \cdot V$
%				\IF{$l_i = 1$ and $i \neq 0$}
%					\STATE $F \gets F \cdot G_{V,P}(\phi(Q))$
%					\STATE $V \gets V + P$
%				\ENDIF
%			\ENDFOR
%			\STATE $F \gets F^{\frac{2^{km} - 1 }{l}}$
%			\RETURN $F$
%		\end{algorithmic}}
%\end{frame}

\section{Implementation}
\subsection*{Implementation}
\begin{frame}{Restrictions}
Avoid the use of flip-flops and muxes:

	\begin{center}
	\begin{tabular}{lr}
		\toprule
		Cell							& Area $\left[\frac{\text{gate}}{\text{bit}}\right]$\\
		\midrule
		D flip-flop (reset)		& 6\\
		D flip-flop (no reset)	& 5.5\\
		D latch						& 4.25\\
		3 input MUX					& 4\\
		2 input XOR					& 3.75\\
		2 input MUX					& 2.25\\
		2 input NAND				& 1\\
		NOT							& 0.75\\
		\bottomrule
	\end{tabular}
	\end{center}
\end{frame}

\begin{frame}{MALU - Addition \& Reduction in $\mathbb{F}_{2^m}$}
\\[-1em]
	\[\begin{gathered}
		R = \left(T + B \quad (\text{mod } P_{\text{in}}) \right)_{0:m-2} \ll 1 \\
		mod_{\text{u}} = \left(T + B \quad (\text{mod } P_{\text{in}}) \right)_{m - 1}
	\end{gathered}\]
	\begin{changemargin}{-2cm}{-2cm}
	\begin{center}\includegraphics[height=0.5\paperheight]{images/malu-basic}\end{center}
	\end{changemargin}
\end{frame}

\begin{frame}{MALU - Addition \& Reduction in $\mathbb{F}_{2^m}$}
	Optimized MALU needs $\Delta = m - \left( \textsf{Hamm}(P) - 1 \right)$ less XOR's:\\[1.7em]
	\begin{changemargin}{-2cm}{-2cm}
	\begin{center}\includegraphics[height=0.5\paperheight]{images/malu-optimized}\end{center}
	\end{changemargin}
\end{frame}

\begin{frame}{$\mathbb{F}_{2^m}$ Multiplication \& Addition}
	\begin{changemargin}{-4cm}{-4cm}
		\begin{center}\includegraphics[height=0.65\paperheight]{images/wrapper-gf2m}\end{center}
	\end{changemargin}
\end{frame}

\begin{frame}{$\mathbb{F}_{2^m}$ Multiplication \& Addition}
	No FSM needed, simple logic:\\[0.7em]
	\begin{changemargin}{-4cm}{-4cm}
		\begin{center}\includegraphics[height=0.55\paperheight]{images/wrapper-gf2m-logica}\end{center}
	\end{changemargin}
\end{frame}

\begin{frame}{$\mathbb{F}_{2^m}$ Multiplication \& Addition}
	Speed up calculation through daisy-chaining MALUs:\\[0.7em]
	\begin{changemargin}{-1cm}{-1cm}
	\begin{center}\includegraphics[height=0.6\paperheight]{images/malu-width-d}\end{center}
	\end{changemargin}
\end{frame}

\begin{frame}{Controller for Miller's algorithm}
\vfill
	\begin{changemargin}{-4cm}{-4cm}
		\begin{center}\includegraphics[width=1\paperwidth]{images/controller-miller}\end{center}
	\end{changemargin}
\vfill
\end{frame}

\begin{frame}{Memory design}
	Starting design:
	\[\overline{t} = O \left( \frac{n^2}{3} \right) \quad \qquad \overline{w} = O \left( \frac{n^3}{3} \right)\] \\[1.7em]
	
	\begin{changemargin}{-4cm}{-4cm}
		\begin{center}\includegraphics[width=0.8\paperwidth]{images/geheugen-circ}\end{center}
	\end{changemargin}
\end{frame}

\begin{frame}{Memory design}
	Final design:\\[0.3em]
	\[\overline{t} = O \left( \frac{n}{4} \right) \quad \qquad \overline{w} = O \left( n \right)\] \\[1.7em]
	
	\begin{changemargin}{-4cm}{-4cm}
		\begin{center}\includegraphics[width=0.8\paperwidth]{images/geheugen-circ-optimized}\end{center}
	\end{changemargin}
\end{frame}

\begin{frame}{Optimizations}
	\begin{itemize}
		\item Remove reset from registers $\left( -0.5 \: \frac{\text{gate}}{\text{bit}} \right)$
		\item Implement clock gating:
	\end{itemize}
	
	\begin{changemargin}{-2cm}{1.2cm}
%		\begin{center}
		\raggedleft
			\uncover<3->{\includegraphics[height=0.13\paperheight]{images/cg-basic}} \\[0.7em]
			\uncover<4->{\includegraphics[height=0.1747\paperheight]{images/cg-no-glitch}} \\[0.7em]
			\uncover<5->{\includegraphics[height=0.13\paperheight]{images/cg-low-power}}\\
%		\end{center}
	\end{changemargin}
\end{frame}

\section{Results}
\subsection*{Results}
\begin{frame}{Runtime}
	\begin{itemize}
		\item FSM with 553 states
		\item Total n$^{\circ}$ of clockcycles $c$ for one pairing:
				\[c = 21681 + 4322 + 2998 \cdot \left\lceil \frac{m}{d} \right\rceil\]
	\end{itemize}
	
	\begin{changemargin}{-4cm}{-4cm}
		\begin{center}\includegraphics[height=0.40\paperheight]{images/results-multi-cycles}\end{center}
	\end{changemargin}
	
	~\\[3em]
	
\vfill
\end{frame}

\begin{frame}{Synthesis}
	\begin{center}
		\tiny{\begin{tabular}{llrlrlr}
			\\[-2em]
			\toprule
			\multirow{2}{*}{Implementation}	& \multicolumn{2}{c}{\multirow{2}{*}{Area [gates]}}	& \multicolumn{4}{c}{Power @ 10 kHz [$nW$]}\\
			\cmidrule{4-7}
			&	& & \multicolumn{2}{c}{Dynamic}	& \multicolumn{2}{c}{Leakage}\\
			\midrule
			Basic			& $28\,876$	& 			& $512$	&	 		& $117$ 	& \\
			No Reset		& $27\,596$	& $96\%$	& $395$	& $77\%$	& $107$ 	& $92\%$\\
			CG 1			& $27\,751$	& $96\%$	& $94$	& $18\%$	& $109$	& $94\%$\\
			CG 2			& $27\,713$	& $96\%$	& $59$	& $12\%$	& $102$	& $88\%$\\
			CG 3			& $27\,734$	& $96\%$	& $96$	& $19\%$	& $110$	& $94\%$\\
			\bottomrule		
		\end{tabular}}

		\\[2em]

		\begin{changemargin}{-1cm}{-1cm}\begin{center}
			\includegraphics[width=0.45\paperwidth]{images/results-m1-en}
		\end{center}\end{changemargin}
	\end{center}
\end{frame}

\begin{frame}{Synthesis - Continued}
\vfill
	\begin{center}
	\begin{changemargin}{-0.3cm}{-0.8cm}
		\begin{minipage}[c]{0.3\paperwidth}
			\tiny{\begin{tabular}{llr}
				\toprule
				Component					& \multicolumn{2}{c}{Opp. [gates]}\\
				\midrule
				MALU				 			& $458$		& $1.7\%$\\
				$\mathbb{F}_{2^m}$ core	&				& \\
				$\quad$ Logic				& $783$		& $2.8\%$\\
				$\quad$ Registers			& $962$		& $3.5\%$\\
				Controller					&				& \\
				$\quad$ Logic				& $13\,044$	& $47\%$\\
				$\quad$ Registers			& $12\,487$	& $45\%$\\
				\midrule
				Total						& $27\,734$	& $100\%$\\
				\bottomrule		
			\end{tabular}}
		\end{minipage}
		\hfill
		\begin{minipage}{0.60\paperwidth}
			\includegraphics[width=0.60\paperwidth]{images/results-md-en}
		\end{minipage}		
	\end{changemargin}
	\end{center}
\vfill
\end{frame}

\begin{frame}{Comparison}
\vfill
\begin{center}
\small{\begin{tabular}{llll}
			\toprule
			&	\multicolumn{2}{c}{This work}	& \multirow{2}{*}{$\begin{array}{@{}c@{}}\text{Beuchat}\\\text{\emph{et al.}}\end{array}$}\\
			\cmidrule(r){2-3}
			& \multicolumn{1}{c}{1 MALU} & \multicolumn{1}{c}{2 MALUs} &\\
	 		\midrule
			Field																& $\mathbb{F}_{2^{163}}$	& $\mathbb{F}_{2^{163}}$	& $\mathbb{F}_{3^{97}}$\\
			Pairing															& Tate							& Tate							& $\eta_T$\\
			Security $[$bit$]$											& $652$							& $652$							& $922$\\
			Technology $[\mu m]$											& $0.13$							& $0.13$							& $0.18$\\
			Area $[$gates$]$												& $27\,430$						& $28\,155$						& $193\,765$\\
			$f$ $[$MHz$]$													& $10.3$							& $5.44$							& $200$\\
			Calc. time $[\mu s]$											& $50 \cdot 10^3$				& $50 \cdot 10^3$				& $46.7$\\
			Power $[mW]$													& $98.3 \cdot 10^{-3}$		& $48.6 \cdot 10^{-3}$		& $672$\\
			Efficiency $\left[ \frac{nJ}{\text{bit}}\right]$	& $7.54$							& $3.73$							& $34.0$\\
			\bottomrule		
		\end{tabular}}
\end{center}
\vfill
\end{frame}

\begin{frame}{Conclussion}
	\begin{itemize}
		\item Very small: $< 30$k gates
		\item Extremely low power: $<220$ nA
		\item Energy efficiency improvement up to $25 \times$ possible
	\end{itemize}
	
	\\[3em]
	
	\begin{center}
		\uncover<4->{Definitely possible to use in constrained environments}
	\end{center}
\end{frame}

\begin{frame}{The end}
	\begin{center}\LARGE Questions?\end{center}
\end{frame}

\end{document}
